<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="@function"><meta name="keywords" content="rust, rustlang, rust-lang, nghttp2_submit_headers"><title>nghttp2_submit_headers in libnghttp2_sys - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><script defer src="../main.js"></script>
    <noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../libnghttp2_sys/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><h2 class="location">Other items in<br><a href="index.html">libnghttp2_sys</a></h2><div id="sidebar-vars" data-name="nghttp2_submit_headers" data-ty="fn" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Function <a href="index.html">libnghttp2_sys</a>::<wbr><a class="fn" href="#">nghttp2_submit_headers</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/libnghttp2_sys/lib.rs.html#3497-3505" title="goto source code">[src]</a></span></h1><div class="docblock item-decl"><pre class="rust fn"><code>pub unsafe extern &quot;C&quot; fn nghttp2_submit_headers(<br>&nbsp;&nbsp;&nbsp;&nbsp;session: <a class="primitive" href="https://doc.rust-lang.org/1.58.1/std/primitive.pointer.html">*mut </a><a class="struct" href="struct.nghttp2_session.html" title="struct libnghttp2_sys::nghttp2_session">nghttp2_session</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;flags: <a class="primitive" href="https://doc.rust-lang.org/1.58.1/std/primitive.u8.html">u8</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;stream_id: <a class="primitive" href="https://doc.rust-lang.org/1.58.1/std/primitive.i32.html">i32</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;pri_spec: <a class="primitive" href="https://doc.rust-lang.org/1.58.1/std/primitive.pointer.html">*const </a><a class="struct" href="struct.nghttp2_priority_spec.html" title="struct libnghttp2_sys::nghttp2_priority_spec">nghttp2_priority_spec</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;nva: <a class="primitive" href="https://doc.rust-lang.org/1.58.1/std/primitive.pointer.html">*const </a><a class="struct" href="struct.nghttp2_nv.html" title="struct libnghttp2_sys::nghttp2_nv">nghttp2_nv</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;nvlen: <a class="primitive" href="https://doc.rust-lang.org/1.58.1/std/primitive.usize.html">usize</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;stream_user_data: <a class="primitive" href="https://doc.rust-lang.org/1.58.1/std/primitive.pointer.html">*mut </a><a class="enum" href="https://doc.rust-lang.org/1.58.1/core/ffi/enum.c_void.html" title="enum core::ffi::c_void">c_void</a><br>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.58.1/std/primitive.i32.html">i32</a></code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>@function</p>
<p>Submits HEADERS frame. The |flags| is bitwise OR of the
following values:</p>
<ul>
<li>:enum:<code>NGHTTP2_FLAG_END_STREAM</code></li>
</ul>
<p>If |flags| includes :enum:<code>NGHTTP2_FLAG_END_STREAM</code>, this frame has
END_STREAM flag set.</p>
<p>The library handles the CONTINUATION frame internally and it
correctly sets END_HEADERS to the last sequence of the PUSH_PROMISE
or CONTINUATION frame.</p>
<p>If the |stream_id| is -1, this frame is assumed as request (i.e.,
request HEADERS frame which opens new stream).  In this case, the
assigned stream ID will be returned.  Otherwise, specify stream ID
in |stream_id|.</p>
<p>The |pri_spec| is priority specification of this request.  <code>NULL</code>
means the default priority (see
<code>nghttp2_priority_spec_default_init()</code>).  To specify the priority,
use <code>nghttp2_priority_spec_init()</code>.  If |pri_spec| is not <code>NULL</code>,
this function will copy its data members.</p>
<p>The <code>pri_spec-&gt;weight</code> must be in [:enum:<code>NGHTTP2_MIN_WEIGHT</code>,
:enum:<code>NGHTTP2_MAX_WEIGHT</code>], inclusive.  If <code>pri_spec-&gt;weight</code> is
strictly less than :enum:<code>NGHTTP2_MIN_WEIGHT</code>, it becomes
:enum:<code>NGHTTP2_MIN_WEIGHT</code>.  If it is strictly greater than
:enum:<code>NGHTTP2_MAX_WEIGHT</code>, it becomes :enum:<code>NGHTTP2_MAX_WEIGHT</code>.</p>
<p>The |nva| is an array of name/value pair :type:<code>nghttp2_nv</code> with
|nvlen| elements.  The application is responsible to include
required pseudo-header fields (header field whose name starts with
“:”) in |nva| and must place pseudo-headers before regular header
fields.</p>
<p>This function creates copies of all name/value pairs in |nva|.  It
also lower-cases all names in |nva|.  The order of elements in
|nva| is preserved.  For header fields with
:enum:<code>NGHTTP2_NV_FLAG_NO_COPY_NAME</code> and
:enum:<code>NGHTTP2_NV_FLAG_NO_COPY_VALUE</code> are set, header field name
and value are not copied respectively.  With
:enum:<code>NGHTTP2_NV_FLAG_NO_COPY_NAME</code>, application is responsible to
pass header field name in lowercase.  The application should
maintain the references to them until
:type:<code>nghttp2_on_frame_send_callback</code> or
:type:<code>nghttp2_on_frame_not_send_callback</code> is called.</p>
<p>The |stream_user_data| is a pointer to an arbitrary data which is
associated to the stream this frame will open.  Therefore it is
only used if this frame opens streams, in other words, it changes
stream state from idle or reserved to open.</p>
<p>This function is low-level in a sense that the application code can
specify flags directly.  For usual HTTP request,
<code>nghttp2_submit_request()</code> is useful.  Likewise, for HTTP response,
prefer <code>nghttp2_submit_response()</code>.</p>
<p>This function returns newly assigned stream ID if it succeeds and
|stream_id| is -1.  Otherwise, this function returns 0 if it
succeeds, or one of the following negative error codes:</p>
<p>:enum:<code>NGHTTP2_ERR_NOMEM</code>
Out of memory.
:enum:<code>NGHTTP2_ERR_STREAM_ID_NOT_AVAILABLE</code>
No stream ID is available because maximum stream ID was
reached.
:enum:<code>NGHTTP2_ERR_INVALID_ARGUMENT</code>
The |stream_id| is 0; or trying to depend on itself (stream ID
equals <code>pri_spec-&gt;stream_id</code>).
:enum:<code>NGHTTP2_ERR_DATA_EXIST</code>
DATA or HEADERS has been already submitted and not fully
processed yet.  This happens if stream denoted by |stream_id|
is in reserved state.
:enum:<code>NGHTTP2_ERR_PROTO</code>
The |stream_id| is -1, and |session| is server session.</p>
<p>.. warning::</p>
<p>This function returns assigned stream ID if it succeeds and
|stream_id| is -1.  But that stream is not opened yet.  The
application must not submit frame to that stream ID before
:type:<code>nghttp2_before_frame_send_callback</code> is called for this
frame.</p>
</div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="libnghttp2_sys" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
</body></html>