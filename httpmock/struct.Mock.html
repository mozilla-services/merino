<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="The Mock structure holds a definition for a request/response scenario that can be used to configure a MockServer."><meta name="keywords" content="rust, rustlang, rust-lang, Mock"><title>Mock in httpmock - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc struct"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../httpmock/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Struct Mock</h2><div class="sidebar-elems"><div class="block items"><h3 class="sidebar-title"><a href="#implementations">Methods</a></h3><div class="sidebar-links"><a href="#method.create_on">create_on</a><a href="#method.create_on_async">create_on_async</a><a href="#method.expect_body">expect_body</a><a href="#method.expect_body_contains">expect_body_contains</a><a href="#method.expect_body_matches">expect_body_matches</a><a href="#method.expect_cookie">expect_cookie</a><a href="#method.expect_cookie_exists">expect_cookie_exists</a><a href="#method.expect_header">expect_header</a><a href="#method.expect_header_exists">expect_header_exists</a><a href="#method.expect_json_body">expect_json_body</a><a href="#method.expect_json_body_obj">expect_json_body_obj</a><a href="#method.expect_json_body_partial">expect_json_body_partial</a><a href="#method.expect_match">expect_match</a><a href="#method.expect_method">expect_method</a><a href="#method.expect_path">expect_path</a><a href="#method.expect_path_contains">expect_path_contains</a><a href="#method.expect_path_matches">expect_path_matches</a><a href="#method.expect_query_param">expect_query_param</a><a href="#method.expect_query_param_exists">expect_query_param_exists</a><a href="#method.new">new</a><a href="#method.return_body">return_body</a><a href="#method.return_body_from_file">return_body_from_file</a><a href="#method.return_header">return_header</a><a href="#method.return_json_body">return_json_body</a><a href="#method.return_json_body_obj">return_json_body_obj</a><a href="#method.return_permanent_redirect">return_permanent_redirect</a><a href="#method.return_status">return_status</a><a href="#method.return_temporary_redirect">return_temporary_redirect</a><a href="#method.return_with_delay">return_with_delay</a></div><h3 class="sidebar-title"><a href="#trait-implementations">Trait Implementations</a></h3><div class="sidebar-links"><a href="#impl-Default">Default</a></div><h3 class="sidebar-title"><a href="#synthetic-implementations">Auto Trait Implementations</a></h3><div class="sidebar-links"><a href="#impl-RefUnwindSafe">RefUnwindSafe</a><a href="#impl-Send">Send</a><a href="#impl-Sync">Sync</a><a href="#impl-Unpin">Unpin</a><a href="#impl-UnwindSafe">UnwindSafe</a></div><h3 class="sidebar-title"><a href="#blanket-implementations">Blanket Implementations</a></h3><div class="sidebar-links"><a href="#impl-Any">Any</a><a href="#impl-Borrow%3CT%3E">Borrow&lt;T&gt;</a><a href="#impl-BorrowMut%3CT%3E">BorrowMut&lt;T&gt;</a><a href="#impl-From%3CT%3E">From&lt;T&gt;</a><a href="#impl-Instrument">Instrument</a><a href="#impl-Into%3CU%3E">Into&lt;U&gt;</a><a href="#impl-TryFrom%3CU%3E">TryFrom&lt;U&gt;</a><a href="#impl-TryInto%3CU%3E">TryInto&lt;U&gt;</a><a href="#impl-WithSubscriber">WithSubscriber</a></div></div><h2 class="location">Other items in<br><a href="index.html">httpmock</a></h2><div id="sidebar-vars" data-name="Mock" data-ty="struct" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‚ÄòS‚Äô to search, ‚Äò?‚Äô for more options‚Ä¶" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Struct <a href="index.html">httpmock</a>::<wbr><a class="struct" href="#">Mock</a><button id="copy-path" onclick="copy_path(this)" title="copy path"><img src="../clipboard.svg" width="19" height="18" alt="Copy item import" title="Copy item import to clipboard"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/httpmock/api/mock.rs.html#507-509" title="goto source code">[src]</a></span></h1><div class="docblock type-decl"><pre class="rust struct">pub struct Mock { /* fields omitted */ }</pre></div><div class="item-info"><div class="stab deprecated"><span class="emoji">üëé</span> Deprecated since 0.5.0: <p>Please use newer API (see: https://github.com/alexliesenfeld/httpmock/blob/master/CHANGELOG.md#version-050)</p>
</div></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>The <a href="struct.Mock.html">Mock</a> structure holds a definition for a request/response scenario
that can be used to configure a <a href="struct.MockServer.html">MockServer</a>.</p>
<p>This structure provides methods starting with <code>expect</code> in their name to
define requirements for HTTP requests that the server will respond to. On the other hand,
methods starting with <code>return</code> in their name define what data the mock server will put into
the corresponding HTTP response.</p>
<p>Because of this naming scheme, this structure is said to privide access to the
‚Äúexpect/return‚Äù API of <code>httpmock</code>.</p>
<h1 id="example" class="section-header"><a href="#example">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Arrange</span>
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path_contains</span>(<span class="string">&quot;/search&quot;</span>)
    .<span class="ident">expect_query_param</span>(<span class="string">&quot;query&quot;</span>, <span class="string">&quot;metallica&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">202</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act: Send the HTTP request</span>
<span class="kw">let</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/search?query=metallica&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">mock</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">202</span>);</pre></div>
<p>Observe how <a href="struct.Mock.html#method.create_on">Mock::create_on</a> is used to create a mock object
on the server. After the call completes, the mock server will start serving HTTP requests
as specified in the <a href="struct.Mock.html">Mock</a> instance.</p>
<p>The <a href="struct.Mock.html#method.create_on">Mock::create_on</a> method also returns a mock reference
that identifies the mock object on the server. It can be used to fetch related information
from the server, such as the number of times the mock was served
(see <a href="struct.MockRef.html#method.hits">MockRef::hits</a>). You can also use it
to explicitly delete the mock object from the server
(see <a href="struct.MockRef.html#method.delete">MockRef::delete</a>).</p>
</div></details><h2 id="implementations" class="small-section-header">Implementations<a href="#implementations" class="anchor"></a></h2><details class="rustdoc-toggle implementors-toggle" open><summary><div id="impl" class="impl has-srclink"><h3 class="code-header in-band">impl <a class="struct" href="struct.Mock.html" title="struct httpmock::Mock">Mock</a></h3><a href="#impl" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#511-1682" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.new" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.new" class="fnname">new</a>() -&gt; Self</h4><a href="#method.new" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#513-542" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Creates a new mock that automatically returns HTTP status code 200 if hit by an HTTP call.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_path" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_path" class="fnname">expect_path</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, path: S) -&gt; Self</h4><a href="#method.expect_path" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#561-564" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the expected URL path.</p>
<ul>
<li><code>path</code> - The URL path.</li>
</ul>
<h1 id="example-1" class="section-header"><a href="#example-1">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">Mock</span>, <span class="ident">MockServer</span>};

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path</span>(<span class="string">&quot;/test&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/test&quot;</span>)).<span class="ident">unwrap</span>();

<span class="ident">mock</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_path_contains" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_path_contains" class="fnname">expect_path_contains</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, substring: S) -&gt; Self</h4><a href="#method.expect_path_contains" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#583-596" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets an substring that the URL path needs to contain.</p>
<ul>
<li><code>substring</code> - The substring to match against.</li>
</ul>
<h1 id="example-2" class="section-header"><a href="#example-2">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">Mock</span>, <span class="ident">MockServer</span>};

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path_contains</span>(<span class="string">&quot;es&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/test&quot;</span>)).<span class="ident">unwrap</span>();

<span class="ident">mock</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_path_matches" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_path_matches" class="fnname">expect_path_matches</a>&lt;R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="type" href="type.Regex.html" title="type httpmock::Regex">Regex</a>&gt;&gt;(self, regex: R) -&gt; Self</h4><a href="#method.expect_path_matches" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#616-628" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets a regex that the URL path needs to match.</p>
<ul>
<li><code>regex</code> - The regex to match against.</li>
</ul>
<h1 id="example-3" class="section-header"><a href="#example-3">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">Mock</span>, <span class="ident">MockServer</span>};
<span class="kw">use</span> <span class="ident">regex::Regex</span>;

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path_matches</span>(<span class="ident">Regex::new</span>(<span class="string">&quot;le$&quot;</span>).<span class="ident">unwrap</span>())
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/example&quot;</span>)).<span class="ident">unwrap</span>();

<span class="ident">mock</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_method" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_method" class="fnname">expect_method</a>&lt;M:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="enum.Method.html" title="enum httpmock::Method">Method</a>&gt;&gt;(self, method: M) -&gt; Self</h4><a href="#method.expect_method" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#650-653" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the expected HTTP method.</p>
<ul>
<li><code>method</code> - The HTTP method.</li>
</ul>
<h1 id="example-4" class="section-header"><a href="#example-4">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">Mock</span>, <span class="ident">MockServer</span>};
<span class="kw">use</span> <span class="ident">httpmock::Method::GET</span>;
<span class="kw">use</span> <span class="ident">regex::Regex</span>;

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_method</span>(<span class="ident">GET</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/&quot;</span>)).<span class="ident">unwrap</span>();

<span class="ident">mock</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_header" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_header" class="fnname">expect_header</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, name: S, value: S) -&gt; Self</h4><a href="#method.expect_header" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#681-694" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the expected HTTP header.</p>
<ul>
<li><code>name</code> - The HTTP header name (header names are case-insensitive by RFC 2616).</li>
<li><code>value</code> - The header value.</li>
</ul>
<h1 id="example-5" class="section-header"><a href="#example-5">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">Mock</span>, <span class="ident">MockServer</span>};
<span class="kw">use</span> <span class="ident">httpmock::Method::GET</span>;
<span class="kw">use</span> <span class="ident">regex::Regex</span>;
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">Request</span>};

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_header</span>(<span class="string">&quot;Authorization&quot;</span>, <span class="string">&quot;token 1234567890&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="ident">Request::post</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;http://{}/test&quot;</span>, <span class="ident">server</span>.<span class="ident">address</span>()))
    .<span class="ident">header</span>(<span class="string">&quot;Authorization&quot;</span>, <span class="string">&quot;token 1234567890&quot;</span>)
    .<span class="ident">body</span>(())
    .<span class="ident">unwrap</span>()
    .<span class="ident">send</span>()
    .<span class="ident">unwrap</span>();

<span class="ident">mock</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_header_exists" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_header_exists" class="fnname">expect_header_exists</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, name: S) -&gt; Self</h4><a href="#method.expect_header_exists" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#723-735" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the requirement that the HTTP request needs to contain a specific header
(value is unchecked, refer to <a href="struct.Mock.html#method.expect_header">Mock::expect_header</a>).</p>
<ul>
<li><code>name</code> - The HTTP header name (header names are case-insensitive by RFC 2616).</li>
</ul>
<h1 id="example-6" class="section-header"><a href="#example-6">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">Mock</span>, <span class="ident">MockServer</span>};
<span class="kw">use</span> <span class="ident">httpmock::Method::GET</span>;
<span class="kw">use</span> <span class="ident">regex::Regex</span>;
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">Request</span>};

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_header_exists</span>(<span class="string">&quot;Authorization&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="ident">Request::post</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;http://{}/test&quot;</span>, <span class="ident">server</span>.<span class="ident">address</span>()))
    .<span class="ident">header</span>(<span class="string">&quot;Authorization&quot;</span>, <span class="string">&quot;token 1234567890&quot;</span>)
    .<span class="ident">body</span>(())
    .<span class="ident">unwrap</span>()
    .<span class="ident">send</span>()
    .<span class="ident">unwrap</span>();

<span class="ident">mock</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_cookie" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_cookie" class="fnname">expect_cookie</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, name: S, value: S) -&gt; Self</h4><a href="#method.expect_cookie" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#766-779" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the cookie that needs to exist in the HTTP request.
Cookie parsing follows <a href="https://tools.ietf.org/html/rfc6265.html">RFC-6265</a>.
<strong>Attention</strong>: Cookie names are <strong>case-sensitive</strong>.</p>
<ul>
<li><code>name</code> - The cookie name.</li>
<li><code>value</code> - The expected cookie value.</li>
</ul>
<h1 id="example-7" class="section-header"><a href="#example-7">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">Mock</span>, <span class="ident">MockServer</span>};
<span class="kw">use</span> <span class="ident">httpmock::Method::GET</span>;
<span class="kw">use</span> <span class="ident">regex::Regex</span>;
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">Request</span>};

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_cookie</span>(<span class="string">&quot;SESSIONID&quot;</span>, <span class="string">&quot;1234567890&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="ident">Request::post</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;http://{}/test&quot;</span>, <span class="ident">server</span>.<span class="ident">address</span>()))
    .<span class="ident">header</span>(<span class="string">&quot;Cookie&quot;</span>, <span class="string">&quot;TRACK=12345; SESSIONID=1234567890; CONSENT=1&quot;</span>)
    .<span class="ident">body</span>(())
    .<span class="ident">unwrap</span>()
    .<span class="ident">send</span>()
    .<span class="ident">unwrap</span>();

<span class="ident">mock</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_cookie_exists" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_cookie_exists" class="fnname">expect_cookie_exists</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, name: S) -&gt; Self</h4><a href="#method.expect_cookie_exists" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#809-821" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the cookie that needs to exist in the HTTP request.
Cookie parsing follows <a href="https://tools.ietf.org/html/rfc6265.html">RFC-6265</a>.
<strong>Attention</strong>: Cookie names are <strong>case-sensitive</strong>.</p>
<ul>
<li><code>name</code> - The cookie name</li>
</ul>
<h1 id="example-8" class="section-header"><a href="#example-8">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">Mock</span>, <span class="ident">MockServer</span>};
<span class="kw">use</span> <span class="ident">httpmock::Method::GET</span>;
<span class="kw">use</span> <span class="ident">regex::Regex</span>;
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">Request</span>};

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_cookie_exists</span>(<span class="string">&quot;SESSIONID&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="ident">Request::post</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;http://{}/test&quot;</span>, <span class="ident">server</span>.<span class="ident">address</span>()))
    .<span class="ident">header</span>(<span class="string">&quot;Cookie&quot;</span>, <span class="string">&quot;TRACK=12345; SESSIONID=1234567890; CONSENT=1&quot;</span>)
    .<span class="ident">body</span>(())
    .<span class="ident">unwrap</span>()
    .<span class="ident">send</span>()
    .<span class="ident">unwrap</span>();

<span class="ident">mock</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_body" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_body" class="fnname">expect_body</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, body: S) -&gt; Self</h4><a href="#method.expect_body" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#848-851" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the required HTTP request body content.</p>
<ul>
<li><code>body</code> - The required HTTP request body.</li>
</ul>
<h1 id="example-9" class="section-header"><a href="#example-9">Example</a></h1>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">Mock</span>, <span class="ident">MockServer</span>};
<span class="kw">use</span> <span class="ident">httpmock::Method::GET</span>;
<span class="kw">use</span> <span class="ident">regex::Regex</span>;
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">Request</span>};

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_body</span>(<span class="string">&quot;The Great Gatsby&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="ident">Request::post</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;http://{}/test&quot;</span>, <span class="ident">server</span>.<span class="ident">address</span>()))
    .<span class="ident">body</span>(<span class="string">&quot;The Great Gatsby&quot;</span>)
    .<span class="ident">unwrap</span>()
    .<span class="ident">send</span>()
    .<span class="ident">unwrap</span>();

<span class="ident">mock</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_json_body_obj" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_json_body_obj" class="fnname">expect_json_body_obj</a>&lt;'a, T&gt;(self, body: <a class="primitive" href="https://doc.rust-lang.org/1.54.0/std/primitive.reference.html">&amp;</a>T) -&gt; Self <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a> + <a class="trait" href="../serde/de/trait.Deserialize.html" title="trait serde::de::Deserialize">Deserialize</a>&lt;'a&gt;,&nbsp;</span></h4><a href="#method.expect_json_body_obj" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#901-907" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the expected JSON body. This method expects a serializable serde object
that will be serialized/deserialized to/from a JSON string.</p>
<p>Note that this method does not set the ‚ÄúContent-Type‚Äù header automatically, so you
need to provide one yourself!</p>
<ul>
<li><code>body</code> - The HTTP body object that will be serialized to JSON using serde.</li>
</ul>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};
<span class="kw">use</span> <span class="ident">httpmock::Method::POST</span>;
<span class="kw">use</span> <span class="ident">serde_json::json</span>;
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">Request</span>};

<span class="comment">// This is a temporary type that we will use for this test</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">serde::Serialize</span>, <span class="ident">serde::Deserialize</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestUser</span> {
    <span class="ident">name</span>: <span class="ident">String</span>,
}

<span class="comment">// Arrange</span>
<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_method</span>(<span class="ident">POST</span>)
    .<span class="ident">expect_path</span>(<span class="string">&quot;/users&quot;</span>)
    .<span class="ident">expect_header</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>)
    .<span class="ident">expect_json_body_obj</span>(<span class="kw-2">&amp;</span><span class="ident">TestUser</span> {
        <span class="ident">name</span>: <span class="ident">String::from</span>(<span class="string">&quot;Fred&quot;</span>),
    })
    .<span class="ident">return_status</span>(<span class="number">201</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act: Send the request and deserialize the response to JSON</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">Request::post</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;http://{}/users&quot;</span>, <span class="ident">server</span>.<span class="ident">address</span>()))
    .<span class="ident">header</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>)
    .<span class="ident">body</span>(<span class="macro">json!</span>(<span class="kw-2">&amp;</span><span class="ident">TestUser</span> {
        <span class="ident">name</span>: <span class="string">&quot;Fred&quot;</span>.<span class="ident">to_string</span>()
    }).<span class="ident">to_string</span>())
    .<span class="ident">unwrap</span>()
    .<span class="ident">send</span>()
    .<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">201</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_json_body" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_json_body" class="fnname">expect_json_body</a>&lt;V:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="../serde_json/value/enum.Value.html" title="enum serde_json::value::Value">Value</a>&gt;&gt;(self, body: V) -&gt; Self</h4><a href="#method.expect_json_body" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#947-950" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the expected JSON body. This method expects a <a href="../serde_json/enum.Value.html">serde_json::Value</a>
that will be serialized/deserialized to/from a JSON string.</p>
<p>Note that this method does not set the <code>Content-Type</code> header automatically, so you
need to provide one yourself!</p>
<ul>
<li><code>body</code> - The HTTP body object that will be serialized to JSON using serde.</li>
</ul>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">Mock</span>, <span class="ident">MockServer</span>};
<span class="kw">use</span> <span class="ident">httpmock::Method::POST</span>;
<span class="kw">use</span> <span class="ident">serde_json::json</span>;
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">Request</span>};

<span class="comment">// Arrange</span>
<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_method</span>(<span class="ident">POST</span>)
    .<span class="ident">expect_path</span>(<span class="string">&quot;/users&quot;</span>)
    .<span class="ident">expect_header</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>)
    .<span class="ident">expect_json_body</span>(<span class="macro">json!</span>({ <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Hans&quot;</span> }))
    .<span class="ident">return_status</span>(<span class="number">201</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act: Send the request and deserialize the response to JSON</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">Request::post</span>(<span class="kw-2">&amp;</span><span class="macro">format!</span>(<span class="string">&quot;http://{}/users&quot;</span>, <span class="ident">server</span>.<span class="ident">address</span>()))
    .<span class="ident">header</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>)
    .<span class="ident">body</span>(<span class="macro">json!</span>({ <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Hans&quot;</span> }).<span class="ident">to_string</span>())
    .<span class="ident">unwrap</span>()
    .<span class="ident">send</span>()
    .<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">201</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_json_body_partial" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_json_body_partial" class="fnname">expect_json_body_partial</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, partial_body: S) -&gt; Self</h4><a href="#method.expect_json_body_partial" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#996-1011" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the expected partial JSON body.</p>
<p><strong>Attention: The partial string needs to be a valid JSON string. It must contain
the full object hierarchy from the original JSON object but can leave out irrelevant
attributes (see example).</strong></p>
<p>Note that this method does not set the <code>Content-Type</code> header automatically, so you
need to provide one yourself!</p>
<p>String format and attribute order are irrelevant.</p>
<ul>
<li><code>partial_body</code> - The HTTP body object that will be serialized to JSON using serde.</li>
</ul>
<h2 id="example-10" class="section-header"><a href="#example-10">Example</a></h2>
<p>Suppose your application sends the following JSON request body:</p>
<pre><code class="language-json">{
    &quot;parent_attribute&quot; : &quot;Some parent data goes here&quot;,
    &quot;child&quot; : {
        &quot;target_attribute&quot; : &quot;Example&quot;,
        &quot;other_attribute&quot; : &quot;Another value&quot;
    }
}
</code></pre>
<p>If we only want to verify that <code>target_attribute</code> has value <code>Example</code> without the need
to provive a full JSON object, we can use this method as follows:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_json_body_partial</span>(<span class="string">r#&quot;
        {
            &quot;child&quot; : {
                &quot;target_attribute&quot; : &quot;Example&quot;
            }
         }
    &quot;#</span>)
    .<span class="ident">return_status</span>(<span class="number">202</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);</pre></div>
<p>Please note that the JSON partial contains the full object hierachy, i.e. it needs to start
from the root! It leaves out irrelevant attributes, however (<code>parent_attribute</code>
and <code>child.other_attribute</code>).</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_body_contains" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_body_contains" class="fnname">expect_body_contains</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, substring: S) -&gt; Self</h4><a href="#method.expect_body_contains" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1045-1057" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the expected HTTP body substring.</p>
<ul>
<li><code>substring</code> - The substring that will matched against.</li>
</ul>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>, <span class="ident">Regex</span>};
<span class="kw">use</span> <span class="ident">httpmock::Method::POST</span>;
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">Request</span>};

<span class="comment">// Arrange</span>
<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_method</span>(<span class="ident">POST</span>)
    .<span class="ident">expect_path</span>(<span class="string">&quot;/books&quot;</span>)
    .<span class="ident">expect_body_contains</span>(<span class="string">&quot;Ring&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">201</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act: Send the request and deserialize the response to JSON</span>
<span class="kw">let</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">Request::post</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/books&quot;</span>))
    .<span class="ident">body</span>(<span class="string">&quot;The Fellowship of the Ring&quot;</span>)
    .<span class="ident">unwrap</span>()
    .<span class="ident">send</span>()
    .<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">201</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_body_matches" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_body_matches" class="fnname">expect_body_matches</a>&lt;R:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="type" href="type.Regex.html" title="type httpmock::Regex">Regex</a>&gt;&gt;(self, regex: R) -&gt; Self</h4><a href="#method.expect_body_matches" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1091-1103" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets a <a href="type.Regex.html">Regex</a> for the expected HTTP body.</p>
<ul>
<li><code>regex</code> - The regex that the HTTP request body will matched against.</li>
</ul>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">Request</span>};
<span class="kw">use</span> <span class="ident">httpmock::Method::POST</span>;
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>, <span class="ident">Regex</span>};

<span class="comment">// Arrange</span>
<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_method</span>(<span class="ident">POST</span>)
    .<span class="ident">expect_path</span>(<span class="string">&quot;/books&quot;</span>)
    .<span class="ident">expect_body_matches</span>(<span class="ident">Regex::new</span>(<span class="string">&quot;Fellowship&quot;</span>).<span class="ident">unwrap</span>())
    .<span class="ident">return_status</span>(<span class="number">201</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act: Send the request and deserialize the response to JSON</span>
<span class="kw">let</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">Request::post</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/books&quot;</span>))
    .<span class="ident">body</span>(<span class="string">&quot;The Fellowship of the Ring&quot;</span>)
    .<span class="ident">unwrap</span>()
    .<span class="ident">send</span>()
    .<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">201</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_query_param" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_query_param" class="fnname">expect_query_param</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, name: S, value: S) -&gt; Self</h4><a href="#method.expect_query_param" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1132-1145" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets a query parameter that needs to be provided.</p>
<p>Attention!: The request query keys and values are implicitly <em>allowed, but is not required</em>
to be urlencoded! The value you pass here, however, must be in plain text (i.e. not encoded)!</p>
<ul>
<li><code>name</code> - The query parameter name that will matched against.</li>
<li><code>value</code> - The value parameter name that will matched against.</li>
</ul>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Arrange</span>
<span class="kw">use</span> <span class="ident">isahc::get</span>;
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};

<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_query_param</span>(<span class="string">&quot;query&quot;</span>, <span class="string">&quot;Metallica&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="ident">get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/search?query=Metallica&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_query_param_exists" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_query_param_exists" class="fnname">expect_query_param_exists</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, name: S) -&gt; Self</h4><a href="#method.expect_query_param_exists" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1173-1186" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets a query parameter that needs to exist in an HTTP request.</p>
<p>Attention!: The request query key is implicitly <em>allowed, but is not required</em> to be
urlencoded! The value you pass here, however, must be in plain text (i.e. not encoded)!</p>
<ul>
<li><code>name</code> - The query parameter name that will matched against.</li>
</ul>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Arrange</span>
<span class="kw">use</span> <span class="ident">isahc::get</span>;
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};

<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_query_param_exists</span>(<span class="string">&quot;query&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="ident">get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/search?query=Metallica&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.expect_match" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.expect_match" class="fnname">expect_match</a>(self, request_matcher: <a class="type" href="type.MockMatcherFunction.html" title="type httpmock::MockMatcherFunction">MockMatcherFunction</a>) -&gt; Self</h4><a href="#method.expect_match" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1213-1226" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets a custom function that will evaluate if an HTTP request matches custom matching rules.
<strong>Attention: This will NOT work in standalone mock server (search the docs for ‚ÄúStandalone‚Äù
to get more information on the standalone mode).</strong></p>
<ul>
<li><code>request_matcher</code> - The matcher function.</li>
</ul>
<h2 id="example-11" class="section-header"><a href="#example-11">Example:</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>, <span class="ident">HttpMockRequest</span>};

<span class="comment">// Arrange</span>
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_match</span>(<span class="op">|</span><span class="ident">req</span>: <span class="kw-2">&amp;</span><span class="ident">HttpMockRequest</span><span class="op">|</span> {
        <span class="ident">req</span>.<span class="ident">path</span>.<span class="ident">ends_with</span>(<span class="string">&quot;st&quot;</span>)
    })
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="kw">let</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/test&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">200</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.return_status" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.return_status" class="fnname">return_status</a>(self, status: <a class="primitive" href="https://doc.rust-lang.org/1.54.0/std/primitive.u16.html">u16</a>) -&gt; Self</h4><a href="#method.return_status" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1250-1253" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the HTTP response code that will be returned by the mock server.</p>
<ul>
<li><code>status</code> - The status code.</li>
</ul>
<h2 id="example-12" class="section-header"><a href="#example-12">Example:</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};

<span class="comment">// Arrange</span>
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path</span>(<span class="string">&quot;/hello&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="kw">let</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/hello&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">200</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.return_body" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.return_body" class="fnname">return_body</a>(self, body: impl <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.AsRef.html" title="trait core::convert::AsRef">AsRef</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.54.0/std/primitive.slice.html">[</a><a class="primitive" href="https://doc.rust-lang.org/1.54.0/std/primitive.u8.html">u8</a><a class="primitive" href="https://doc.rust-lang.org/1.54.0/std/primitive.slice.html">]</a>&gt;) -&gt; Self</h4><a href="#method.return_body" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1280-1283" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the HTTP response body that will be returned by the mock server.</p>
<ul>
<li><code>body</code> - The response body content.</li>
</ul>
<h2 id="example-13" class="section-header"><a href="#example-13">Example:</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">ResponseExt</span>};

<span class="comment">// Arrange</span>
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path</span>(<span class="string">&quot;/hello&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">return_body</span>(<span class="string">&quot;ohi!&quot;</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/hello&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">200</span>);
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">text</span>().<span class="ident">unwrap</span>(), <span class="string">&quot;ohi!&quot;</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.return_body_from_file" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.return_body_from_file" class="fnname">return_body_from_file</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(<br>&nbsp;&nbsp;&nbsp;&nbsp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;resource_file_path: S<br>) -&gt; Self</h4><a href="#method.return_body_from_file" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1312-1327" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the HTTP response body that will be returned by the mock server.</p>
<ul>
<li><code>resource_file_path</code> - The file path to the file with the response body content. The file
path can either be absolute or relative to the project root
directory.</li>
</ul>
<h2 id="example-14" class="section-header"><a href="#example-14">Example:</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">ResponseExt</span>};

<span class="comment">// Arrange</span>
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();
<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path</span>(<span class="string">&quot;/hello&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">return_body_from_file</span>(<span class="string">&quot;tests/resources/simple_body.txt&quot;</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/hello&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">200</span>);
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">text</span>().<span class="ident">unwrap</span>(), <span class="string">&quot;ohi!&quot;</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.return_json_body" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.return_json_body" class="fnname">return_json_body</a>&lt;V:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="enum" href="../serde_json/value/enum.Value.html" title="enum serde_json::value::Value">Value</a>&gt;&gt;(self, body: V) -&gt; Self</h4><a href="#method.return_json_body" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1369-1372" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the JSON body for the HTTP response that will be returned by the mock server.</p>
<p>The provided JSON object needs to be both, a deserializable and serializable serde object.</p>
<p>Note that this method does not set the ‚ÄúContent-Type‚Äù header automatically, so you need
to provide one yourself!</p>
<ul>
<li><code>body</code> -  The HTTP response body the mock server will return in the form of a
serde_json::Value object.</li>
</ul>
<h2 id="example-15" class="section-header"><a href="#example-15">Example</a></h2>
<p>You can use this method conveniently as follows:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};
<span class="kw">use</span> <span class="ident">serde_json</span>::{<span class="ident">Value</span>, <span class="ident">json</span>};
<span class="kw">use</span> <span class="ident">isahc::ResponseExt</span>;
<span class="kw">use</span> <span class="ident">isahc::prelude</span>::<span class="kw-2">*</span>;

<span class="comment">// Arrange</span>
<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path</span>(<span class="string">&quot;/user&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">return_header</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>)
    .<span class="ident">return_json_body</span>(<span class="macro">json!</span>({ <span class="string">&quot;name&quot;</span>: <span class="string">&quot;Hans&quot;</span> }))
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/user&quot;</span>)).<span class="ident">unwrap</span>();

<span class="kw">let</span> <span class="ident">user</span>: <span class="ident">Value</span> <span class="op">=</span>
    <span class="ident">serde_json::from_str</span>(<span class="kw-2">&amp;</span><span class="ident">response</span>.<span class="ident">text</span>().<span class="ident">unwrap</span>()).<span class="ident">expect</span>(<span class="string">&quot;cannot deserialize JSON&quot;</span>);

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">200</span>);
<span class="macro">assert_eq!</span>(<span class="ident">user</span>.<span class="ident">as_object</span>().<span class="ident">unwrap</span>().<span class="ident">get</span>(<span class="string">&quot;name&quot;</span>).<span class="ident">unwrap</span>(), <span class="string">&quot;Hans&quot;</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.return_json_body_obj" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.return_json_body_obj" class="fnname">return_json_body_obj</a>&lt;T&gt;(self, body: <a class="primitive" href="https://doc.rust-lang.org/1.54.0/std/primitive.reference.html">&amp;</a>T) -&gt; Self <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: <a class="trait" href="../serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a>,&nbsp;</span></h4><a href="#method.return_json_body_obj" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1417-1424" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets the JSON body that will be returned by the mock server.
This method expects a serializable serde object that will be serialized/deserialized
to/from a JSON string.</p>
<p>Note that this method does not set the ‚ÄúContent-Type‚Äù header automatically, so you
need to provide one yourself!</p>
<ul>
<li><code>body</code> - The HTTP body object that will be serialized to JSON using serde.</li>
</ul>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">ResponseExt</span>};

<span class="comment">// This is a temporary type that we will use for this example</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">serde::Serialize</span>, <span class="ident">serde::Deserialize</span>)]</span>
<span class="kw">struct</span> <span class="ident">TestUser</span> {
    <span class="ident">name</span>: <span class="ident">String</span>,
}

<span class="comment">// Arrange</span>
<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path</span>(<span class="string">&quot;/user&quot;</span>)
    .<span class="ident">return_status</span>(<span class="number">201</span>)
    .<span class="ident">return_header</span>(<span class="string">&quot;Content-Type&quot;</span>, <span class="string">&quot;application/json&quot;</span>)
    .<span class="ident">return_json_body_obj</span>(<span class="kw-2">&amp;</span><span class="ident">TestUser</span> {
        <span class="ident">name</span>: <span class="ident">String::from</span>(<span class="string">&quot;Hans&quot;</span>),
    })
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/user&quot;</span>)).<span class="ident">unwrap</span>();

<span class="kw">let</span> <span class="ident">user</span>: <span class="ident">TestUser</span> <span class="op">=</span>
    <span class="ident">serde_json::from_str</span>(<span class="kw-2">&amp;</span><span class="ident">response</span>.<span class="ident">text</span>().<span class="ident">unwrap</span>()).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">201</span>);
<span class="macro">assert_eq!</span>(<span class="ident">user</span>.<span class="ident">name</span>, <span class="string">&quot;Hans&quot;</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.return_header" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.return_header" class="fnname">return_header</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, name: S, value: S) -&gt; Self</h4><a href="#method.return_header" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1454-1467" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets an HTTP header that the mock server will return.</p>
<ul>
<li><code>name</code> - The name of the header.</li>
<li><code>value</code> - The value of the header.</li>
</ul>
<h2 id="example-16" class="section-header"><a href="#example-16">Example</a></h2>
<p>You can use this method conveniently as follows:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Arrange</span>
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};
<span class="kw">use</span> <span class="ident">serde_json::Value</span>;
<span class="kw">use</span> <span class="ident">isahc::ResponseExt</span>;

<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">m</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">return_header</span>(<span class="string">&quot;Expires&quot;</span>, <span class="string">&quot;Wed, 21 Oct 2050 07:28:00 GMT&quot;</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">m</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">200</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.return_permanent_redirect" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.return_permanent_redirect" class="fnname">return_permanent_redirect</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, redirect_url: S) -&gt; Self</h4><a href="#method.return_permanent_redirect" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1512-1521" title="goto source code">[src]</a></div><div class="item-info"><div class="stab deprecated"><span class="emoji">üëé</span> Deprecated since 0.5.6: <p>Please use desired response code and headers instead</p>
</div></div></summary><div class="docblock"><p>Sets the HTTP response up to return a permanent redirect.</p>
<p>In detail, this method will add the following information to the HTTP response:</p>
<ul>
<li>A ‚ÄúLocation‚Äù header with the provided URL as its value.</li>
<li>Status code will be set to 301 (if no other status code was set before).</li>
<li>The response body will be set to ‚ÄúMoved Permanently‚Äù (if no other body was set before).</li>
</ul>
<p>Further information: https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections
and https://tools.ietf.org/html/rfc2616#section-10.3.8.</p>
<ul>
<li><code>redirect_url</code> - THe URL to redirect to.</li>
</ul>
<h2 id="example-17" class="section-header"><a href="#example-17">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Arrange</span>
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">ResponseExt</span>};

<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">redirect_mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path</span>(<span class="string">&quot;/redirectPath&quot;</span>)
    .<span class="ident">return_permanent_redirect</span>(<span class="string">&quot;http://www.google.com&quot;</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act: Send the HTTP request with an HTTP client that DOES NOT FOLLOW redirects automatically!</span>
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/redirectPath&quot;</span>)).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">body</span> <span class="op">=</span> <span class="ident">response</span>.<span class="ident">text</span>().<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="macro">assert_eq!</span>(<span class="ident">redirect_mock</span>.<span class="ident">hits</span>(), <span class="number">1</span>);

<span class="comment">// Attention!: Note that all of these values are automatically added to the response</span>
<span class="comment">// (see details in mock builder method documentation).</span>
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">301</span>);
<span class="macro">assert_eq!</span>(<span class="ident">body</span>, <span class="string">&quot;Moved Permanently&quot;</span>);
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">headers</span>().<span class="ident">get</span>(<span class="string">&quot;Location&quot;</span>).<span class="ident">unwrap</span>().<span class="ident">to_str</span>().<span class="ident">unwrap</span>(), <span class="string">&quot;http://www.google.com&quot;</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.return_temporary_redirect" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.return_temporary_redirect" class="fnname">return_temporary_redirect</a>&lt;S:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>&gt;&gt;(self, redirect_url: S) -&gt; Self</h4><a href="#method.return_temporary_redirect" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1567-1576" title="goto source code">[src]</a></div><div class="item-info"><div class="stab deprecated"><span class="emoji">üëé</span> Deprecated since 0.5.6: <p>Please use desired response code and headers instead</p>
</div></div></summary><div class="docblock"><p>Sets the HTTP response up to return a temporary redirect.</p>
<p>In detail, this method will add the following information to the HTTP response:</p>
<ul>
<li>A ‚ÄúLocation‚Äù header with the provided URL as its value.</li>
<li>Status code will be set to 302 (if no other status code was set before).</li>
<li>The response body will be set to ‚ÄúFound‚Äù (if no other body was set before).</li>
</ul>
<p>Further information: https://developer.mozilla.org/en-US/docs/Web/HTTP/Redirections
and https://tools.ietf.org/html/rfc2616#section-10.3.8.</p>
<ul>
<li><code>redirect_url</code> - THe URL to redirect to.</li>
</ul>
<h2 id="example-18" class="section-header"><a href="#example-18">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Arrange</span>
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};
<span class="kw">use</span> <span class="ident">isahc</span>::{<span class="ident">prelude</span>::<span class="kw-2">*</span>, <span class="ident">ResponseExt</span>};

<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">redirect_mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path</span>(<span class="string">&quot;/redirectPath&quot;</span>)
    .<span class="ident">return_temporary_redirect</span>(<span class="string">&quot;http://www.google.com&quot;</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act: Send the HTTP request with an HTTP client that DOES NOT FOLLOW redirects automatically!</span>

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/redirectPath&quot;</span>)).<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">body</span> <span class="op">=</span> <span class="ident">response</span>.<span class="ident">text</span>().<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="macro">assert_eq!</span>(<span class="ident">redirect_mock</span>.<span class="ident">hits</span>(), <span class="number">1</span>);

<span class="comment">// Attention!: Note that all of these values are automatically added to the response</span>
<span class="comment">// (see details in mock builder method documentation).</span>
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">status</span>(), <span class="number">302</span>);
<span class="macro">assert_eq!</span>(<span class="ident">body</span>, <span class="string">&quot;Found&quot;</span>);
<span class="macro">assert_eq!</span>(<span class="ident">response</span>.<span class="ident">headers</span>().<span class="ident">get</span>(<span class="string">&quot;Location&quot;</span>).<span class="ident">unwrap</span>().<span class="ident">to_str</span>().<span class="ident">unwrap</span>(), <span class="string">&quot;http://www.google.com&quot;</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.return_with_delay" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.return_with_delay" class="fnname">return_with_delay</a>&lt;D:&nbsp;<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.54.0/core/time/struct.Duration.html" title="struct core::time::Duration">Duration</a>&gt;&gt;(self, duration: D) -&gt; Self</h4><a href="#method.return_with_delay" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1605-1608" title="goto source code">[src]</a></div></summary><div class="docblock"><p>Sets a duration that will delay the mock server response.</p>
<ul>
<li><code>duration</code> - The delay.</li>
</ul>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Arrange</span>
<span class="kw">use</span> <span class="ident">std::time</span>::{<span class="ident">SystemTime</span>, <span class="ident">Duration</span>};
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};

<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">start_time</span> <span class="op">=</span> <span class="ident">SystemTime::now</span>();
<span class="kw">let</span> <span class="ident">delay</span> <span class="op">=</span> <span class="ident">Duration::from_secs</span>(<span class="number">3</span>);

<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">expect_path</span>(<span class="string">&quot;/delay&quot;</span>)
    .<span class="ident">return_with_delay</span>(<span class="ident">delay</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="kw">let</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/delay&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">mock</span>.<span class="ident">assert</span>();
<span class="macro">assert_eq!</span>(<span class="ident">start_time</span>.<span class="ident">elapsed</span>().<span class="ident">unwrap</span>() <span class="op">&gt;</span> <span class="ident">delay</span>, <span class="bool-val">true</span>);</pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.create_on" class="method has-srclink"><h4 class="code-header">pub fn <a href="#method.create_on" class="fnname">create_on</a>&lt;'a&gt;(self, server: &amp;'a <a class="struct" href="struct.MockServer.html" title="struct httpmock::MockServer">MockServer</a>) -&gt; <a class="struct" href="struct.MockRef.html" title="struct httpmock::MockRef">MockRef</a>&lt;'a&gt;</h4><a href="#method.create_on" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1635-1637" title="goto source code">[src]</a></div></summary><div class="docblock"><p>This method creates the mock object at the <a href="struct.MockServer.html">MockServer</a>.
It returns a <a href="struct.MockRef.html">MockRef</a> object representing the reference of the
created mock at the server. Only after the call of this method completes, the mock server
will start serving HTTP requests as specified in the <a href="struct.Mock.html">Mock</a> instance.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="comment">// Arrange</span>
<span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};

<span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();
<span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start</span>();

<span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
    .<span class="ident">return_status</span>(<span class="number">200</span>)
    .<span class="ident">create_on</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>);

<span class="comment">// Act</span>
<span class="kw">let</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/delay&quot;</span>)).<span class="ident">unwrap</span>();

<span class="comment">// Assert</span>
<span class="ident">mock</span>.<span class="ident">assert</span>();</pre></div>
<h1 id="panics" class="section-header"><a href="#panics">Panics</a></h1>
<p>This method will panic if there is a problem communicating with the server.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.create_on_async" class="method has-srclink"><h4 class="code-header">pub async fn <a href="#method.create_on_async" class="fnname">create_on_async</a>&lt;'a&gt;(self, server: &amp;'a <a class="struct" href="struct.MockServer.html" title="struct httpmock::MockServer">MockServer</a>) -&gt; <a class="struct" href="struct.MockRef.html" title="struct httpmock::MockRef">MockRef</a>&lt;'a&gt;</h4><a href="#method.create_on_async" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1669-1681" title="goto source code">[src]</a></div></summary><div class="docblock"><p>This method creates the mock object at the <a href="struct.MockServer.html">MockServer</a>.
It returns a <a href="struct.MockRef.html">MockRef</a> object representing the reference of the
created mock at the server. Only after the call of this method completes, the mock server
will start serving HTTP requests as specified in the <a href="struct.Mock.html">Mock</a> instance.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered">
<span class="ident">async_std::task::block_on</span>(<span class="kw">async</span> {
    <span class="kw">use</span> <span class="ident">std::time</span>::{<span class="ident">SystemTime</span>, <span class="ident">Duration</span>};
    <span class="kw">use</span> <span class="ident">httpmock</span>::{<span class="ident">MockServer</span>, <span class="ident">Mock</span>};
    <span class="kw">use</span> <span class="ident">tokio_test::block_on</span>;
    <span class="kw">let</span> <span class="kw">_</span> <span class="op">=</span> <span class="ident">env_logger::try_init</span>();

    <span class="comment">// Arrange</span>
    <span class="kw">let</span> <span class="ident">server</span> <span class="op">=</span> <span class="ident">MockServer::start_async</span>().<span class="kw">await</span>;

    <span class="kw">let</span> <span class="ident">mock</span> <span class="op">=</span> <span class="ident">Mock::new</span>()
        .<span class="ident">return_status</span>(<span class="number">200</span>)
        .<span class="ident">create_on_async</span>(<span class="kw-2">&amp;</span><span class="ident">server</span>)
        .<span class="kw">await</span>;

    <span class="comment">// Act</span>
    <span class="kw">let</span> <span class="ident">response</span> <span class="op">=</span> <span class="ident">isahc::get_async</span>(<span class="ident">server</span>.<span class="ident">url</span>(<span class="string">&quot;/delay&quot;</span>)).<span class="kw">await</span>.<span class="ident">unwrap</span>();

    <span class="comment">// Assert</span>
    <span class="ident">mock</span>.<span class="ident">assert_async</span>().<span class="kw">await</span>;
});</pre></div>
<h1 id="panics-1" class="section-header"><a href="#panics-1">Panics</a></h1>
<p>This method will panic if there is a problem communicating with the server.</p>
</div></details></div></details><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Default" class="impl has-srclink"><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/default/trait.Default.html" title="trait core::default::Default">Default</a> for <a class="struct" href="struct.Mock.html" title="struct httpmock::Mock">Mock</a></h3><a href="#impl-Default" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1684-1688" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.default" class="method trait-impl has-srclink"><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.54.0/core/default/trait.Default.html#tymethod.default" class="fnname">default</a>() -&gt; Self</h4><a href="#method.default" class="anchor"></a><a class="srclink" href="../src/httpmock/api/mock.rs.html#1685-1687" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Returns the ‚Äúdefault value‚Äù for a type. <a href="https://doc.rust-lang.org/1.54.0/core/default/trait.Default.html#tymethod.default">Read more</a></p>
</div></details></div></details></div><h2 id="synthetic-implementations" class="small-section-header">Auto Trait Implementations<a href="#synthetic-implementations" class="anchor"></a></h2><div id="synthetic-implementations-list"><div id="impl-RefUnwindSafe" class="impl has-srclink"><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.54.0/std/panic/trait.RefUnwindSafe.html" title="trait std::panic::RefUnwindSafe">RefUnwindSafe</a> for <a class="struct" href="struct.Mock.html" title="struct httpmock::Mock">Mock</a></h3><a href="#impl-RefUnwindSafe" class="anchor"></a></div><div id="impl-Send" class="impl has-srclink"><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> for <a class="struct" href="struct.Mock.html" title="struct httpmock::Mock">Mock</a></h3><a href="#impl-Send" class="anchor"></a></div><div id="impl-Sync" class="impl has-srclink"><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> for <a class="struct" href="struct.Mock.html" title="struct httpmock::Mock">Mock</a></h3><a href="#impl-Sync" class="anchor"></a></div><div id="impl-Unpin" class="impl has-srclink"><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/marker/trait.Unpin.html" title="trait core::marker::Unpin">Unpin</a> for <a class="struct" href="struct.Mock.html" title="struct httpmock::Mock">Mock</a></h3><a href="#impl-Unpin" class="anchor"></a></div><div id="impl-UnwindSafe" class="impl has-srclink"><h3 class="code-header in-band">impl <a class="trait" href="https://doc.rust-lang.org/1.54.0/std/panic/trait.UnwindSafe.html" title="trait std::panic::UnwindSafe">UnwindSafe</a> for <a class="struct" href="struct.Mock.html" title="struct httpmock::Mock">Mock</a></h3><a href="#impl-UnwindSafe" class="anchor"></a></div></div><h2 id="blanket-implementations" class="small-section-header">Blanket Implementations<a href="#blanket-implementations" class="anchor"></a></h2><div id="blanket-implementations-list"><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Any" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/any/trait.Any.html" title="trait core::any::Any">Any</a> for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: 'static + ?<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3><a href="#impl-Any" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/any.rs.html#131-135" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.type_id" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.54.0/core/any/trait.Any.html#tymethod.type_id" class="fnname">type_id</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/1.54.0/core/any/struct.TypeId.html" title="struct core::any::TypeId">TypeId</a></h4><a href="#method.type_id" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/any.rs.html#132" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Gets the <code>TypeId</code> of <code>self</code>. <a href="https://doc.rust-lang.org/1.54.0/core/any/trait.Any.html#tymethod.type_id">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Borrow%3CT%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/borrow/trait.Borrow.html" title="trait core::borrow::Borrow">Borrow</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3><a href="#impl-Borrow%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/borrow.rs.html#208-213" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.borrow" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.54.0/core/borrow/trait.Borrow.html#tymethod.borrow" class="fnname">borrow</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.54.0/std/primitive.reference.html">&amp;</a>T</h4><a href="#method.borrow" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/borrow.rs.html#210" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Immutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.54.0/core/borrow/trait.Borrow.html#tymethod.borrow">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-BorrowMut%3CT%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/borrow/trait.BorrowMut.html" title="trait core::borrow::BorrowMut">BorrowMut</a>&lt;T&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;T: ?<a class="trait" href="https://doc.rust-lang.org/1.54.0/core/marker/trait.Sized.html" title="trait core::marker::Sized">Sized</a>,&nbsp;</span></h3><a href="#impl-BorrowMut%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/borrow.rs.html#216-220" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.borrow_mut" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.54.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut" class="fnname">borrow_mut</a>(&amp;mut self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.54.0/std/primitive.reference.html">&amp;mut </a>T</h4><a href="#method.borrow_mut" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/borrow.rs.html#217" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Mutably borrows from an owned value. <a href="https://doc.rust-lang.org/1.54.0/core/borrow/trait.BorrowMut.html#tymethod.borrow_mut">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-From%3CT%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt; for T</h3><a href="#impl-From%3CT%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/convert/mod.rs.html#544-548" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.from" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.54.0/core/convert/trait.From.html#tymethod.from" class="fnname">from</a>(t: T) -&gt; T</h4><a href="#method.from" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/convert/mod.rs.html#545" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Instrument" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../tracing_futures/trait.Instrument.html" title="trait tracing_futures::Instrument">Instrument</a> for T</h3><a href="#impl-Instrument" class="anchor"></a><a class="srclink" href="../src/tracing_futures/lib.rs.html#273" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.instrument" class="method trait-impl has-srclink"><h4 class="code-header">fn <a href="../tracing_futures/trait.Instrument.html#method.instrument" class="fnname">instrument</a>(self, span: <a class="struct" href="../tracing/span/struct.Span.html" title="struct tracing::span::Span">Span</a>) -&gt; <a class="struct" href="../tracing_futures/struct.Instrumented.html" title="struct tracing_futures::Instrumented">Instrumented</a>&lt;Self&gt;</h4><a href="#method.instrument" class="anchor"></a><a class="srclink" href="../src/tracing_futures/lib.rs.html#154" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Instruments this type with the provided <code>Span</code>, returning an
<code>Instrumented</code> wrapper. <a href="../tracing_futures/trait.Instrument.html#method.instrument">Read more</a></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.in_current_span" class="method trait-impl has-srclink"><h4 class="code-header">fn <a href="../tracing_futures/trait.Instrument.html#method.in_current_span" class="fnname">in_current_span</a>(self) -&gt; <a class="struct" href="../tracing_futures/struct.Instrumented.html" title="struct tracing_futures::Instrumented">Instrumented</a>&lt;Self&gt;</h4><a href="#method.in_current_span" class="anchor"></a><a class="srclink" href="../src/tracing_futures/lib.rs.html#191" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Instruments this type with the <a href="https://docs.rs/tracing/latest/tracing/span/struct.Span.html#method.current">current</a> <code>Span</code>, returning an
<code>Instrumented</code> wrapper. <a href="../tracing_futures/trait.Instrument.html#method.in_current_span">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Instrument-1" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../tracing/instrument/trait.Instrument.html" title="trait tracing::instrument::Instrument">Instrument</a> for T</h3><a href="#impl-Instrument-1" class="anchor"></a><a class="srclink" href="../src/tracing/instrument.rs.html#155" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.instrument-1" class="method trait-impl has-srclink"><h4 class="code-header">fn <a href="../tracing/instrument/trait.Instrument.html#method.instrument" class="fnname">instrument</a>(self, span: <a class="struct" href="../tracing/span/struct.Span.html" title="struct tracing::span::Span">Span</a>) -&gt; <a class="struct" href="../tracing/instrument/struct.Instrumented.html" title="struct tracing::instrument::Instrumented">Instrumented</a>&lt;Self&gt;</h4><a href="#method.instrument-1" class="anchor"></a><a class="srclink" href="../src/tracing/instrument.rs.html#38" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Instruments this type with the provided <code>Span</code>, returning an
<code>Instrumented</code> wrapper. <a href="../tracing/instrument/trait.Instrument.html#method.instrument">Read more</a></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.in_current_span-1" class="method trait-impl has-srclink"><h4 class="code-header">fn <a href="../tracing/instrument/trait.Instrument.html#method.in_current_span" class="fnname">in_current_span</a>(self) -&gt; <a class="struct" href="../tracing/instrument/struct.Instrumented.html" title="struct tracing::instrument::Instrumented">Instrumented</a>&lt;Self&gt;</h4><a href="#method.in_current_span-1" class="anchor"></a><a class="srclink" href="../src/tracing/instrument.rs.html#74" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Instruments this type with the <a href="../struct.Span.html#method.current">current</a> <code>Span</code>, returning an
<code>Instrumented</code> wrapper. <a href="../tracing/instrument/trait.Instrument.html#method.in_current_span">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-Into%3CU%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.From.html" title="trait core::convert::From">From</a>&lt;T&gt;,&nbsp;</span></h3><a href="#impl-Into%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/convert/mod.rs.html#533-540" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.into" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html#tymethod.into" class="fnname">into</a>(self) -&gt; U</h4><a href="#method.into" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/convert/mod.rs.html#537" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-TryFrom%3CU%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;T&gt;,&nbsp;</span></h3><a href="#impl-TryFrom%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/convert/mod.rs.html#581-590" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><div id="associatedtype.Error" class="type trait-impl has-srclink"><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryFrom.html#associatedtype.Error" class="type">Error</a> = <a class="enum" href="https://doc.rust-lang.org/1.54.0/core/convert/enum.Infallible.html" title="enum core::convert::Infallible">Infallible</a></h4><a href="#associatedtype.Error" class="anchor"></a></div></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.try_from" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryFrom.html#tymethod.try_from" class="fnname">try_from</a>(value: U) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.54.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;T, &lt;T as <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;U&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4><a href="#method.try_from" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/convert/mod.rs.html#587" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-TryInto%3CU%3E" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T, U&gt; <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryInto.html" title="trait core::convert::TryInto">TryInto</a>&lt;U&gt; for T <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;U: <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;,&nbsp;</span></h3><a href="#impl-TryInto%3CU%3E" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/convert/mod.rs.html#567-576" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle" open><summary><div id="associatedtype.Error-1" class="type trait-impl has-srclink"><h4 class="code-header">type <a href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryInto.html#associatedtype.Error" class="type">Error</a> = &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a></h4><a href="#associatedtype.Error-1" class="anchor"></a></div></summary><div class='docblock'><p>The type returned in the event of a conversion error.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.try_into" class="method trait-impl has-srclink"><h4 class="code-header">pub fn <a href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryInto.html#tymethod.try_into" class="fnname">try_into</a>(self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.54.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;U, &lt;U as <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryFrom.html" title="trait core::convert::TryFrom">TryFrom</a>&lt;T&gt;&gt;::<a class="type" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.TryFrom.html#associatedtype.Error" title="type core::convert::TryFrom::Error">Error</a>&gt;</h4><a href="#method.try_into" class="anchor"></a><a class="srclink" href="https://doc.rust-lang.org/1.54.0/src/core/convert/mod.rs.html#573" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Performs the conversion.</p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle"><summary><div id="impl-WithSubscriber" class="impl has-srclink"><h3 class="code-header in-band">impl&lt;T&gt; <a class="trait" href="../tracing_futures/trait.WithSubscriber.html" title="trait tracing_futures::WithSubscriber">WithSubscriber</a> for T</h3><a href="#impl-WithSubscriber" class="anchor"></a><a class="srclink" href="../src/tracing_futures/lib.rs.html#432" title="goto source code">[src]</a></div></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><div id="method.with_subscriber" class="method trait-impl has-srclink"><h4 class="code-header">fn <a href="../tracing_futures/trait.WithSubscriber.html#method.with_subscriber" class="fnname">with_subscriber</a>&lt;S&gt;(self, subscriber: S) -&gt; <a class="struct" href="../tracing_futures/struct.WithDispatch.html" title="struct tracing_futures::WithDispatch">WithDispatch</a>&lt;Self&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="https://doc.rust-lang.org/1.54.0/core/convert/trait.Into.html" title="trait core::convert::Into">Into</a>&lt;<a class="struct" href="../tracing_core/dispatcher/struct.Dispatch.html" title="struct tracing_core::dispatcher::Dispatch">Dispatch</a>&gt;,&nbsp;</span></h4><a href="#method.with_subscriber" class="anchor"></a><a class="srclink" href="../src/tracing_futures/lib.rs.html#213-215" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Attaches the provided <a href="https://docs.rs/tracing/latest/tracing/subscriber/trait.Subscriber.html"><code>Subscriber</code></a> to this type, returning a
<code>WithDispatch</code> wrapper. <a href="../tracing_futures/trait.WithSubscriber.html#method.with_subscriber">Read more</a></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><div id="method.with_current_subscriber" class="method trait-impl has-srclink"><h4 class="code-header">fn <a href="../tracing_futures/trait.WithSubscriber.html#method.with_current_subscriber" class="fnname">with_current_subscriber</a>(self) -&gt; <a class="struct" href="../tracing_futures/struct.WithDispatch.html" title="struct tracing_futures::WithDispatch">WithDispatch</a>&lt;Self&gt;</h4><a href="#method.with_current_subscriber" class="anchor"></a><a class="srclink" href="../src/tracing_futures/lib.rs.html#237" title="goto source code">[src]</a></div></summary><div class='docblock'><p>Attaches the current <a href="https://docs.rs/tracing/latest/tracing/dispatcher/index.html#setting-the-default-subscriber">default</a> <a href="https://docs.rs/tracing/latest/tracing/subscriber/trait.Subscriber.html"><code>Subscriber</code></a> to this type, returning a
<code>WithDispatch</code> wrapper. <a href="../tracing_futures/trait.WithSubscriber.html#method.with_current_subscriber">Read more</a></p>
</div></details></div></details></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="httpmock" data-search-index-js="../search-index.js" data-search-js="../search.js"></div><script src="../main.js"></script></body></html>